{% extends "django_messages/base.html" %}
{% load i18n %}
{% load url from future %}

{% block all_content %}

    {{ block.super }}

    <div class="josinstructions" style="margin-bottom: 20px;">{{ user.JOSProfile.jos_name }} - Inbox:</div>

    {% if message_list %}
        <table>
            <thead>
                <tr>
                    <th>From:</th>
                    <th>Received:</th>
                    <th>Subject:</th>
                </tr>
            </thead>
            <tbody>
            {% for message in message_list %}
                {% if message.new %}<strong>{% endif %}
                {% if message.replied %}<em>{% endif %}
                    <tr>
                        <td>{{ message.sender.JOSProfile.jos_name }}</td>
                        <td style="width: 25%;">{{ message.sent_at|date:_("DATETIME_FORMAT") }}</td>
                        <td>
                            {{ message.subject }}
                        </td>
                        <td style="width: 35%;">
                            <a class="btn btn-default"
                               style="background-color: #5cb85c; border: none; color: white; outline: none; width: 100px;"
                               href="{{ message.get_absolute_url }}">
                                Read
                            </a>
                            <a class="btn btn-default"
                               style="background-color: #d9534f; border: none; color: white; outline: none; width: 100px;"
                               href="{% url 'messages_delete' message.id %}">
                                Delete
                            </a>
                        </td>
                    </tr>
                {% if message.replied %}</em>{% endif %}
                {% if message.new %}</strong>{% endif %}
            {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No messages</p>
    {% endif %}
{% endblock %}