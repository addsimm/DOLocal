{% extends "base.html" %}
{% load static %}
{% block meta_title %}{% endblock %}
{% block title %}{% endblock %}
{% block breadcrumb_menu %}

    {{ block.super }}
    Plot template {{ storywheel.title }}

{% endblock %}
{% block base-fixed-top-bar %}{% endblock base-fixed-top-bar %}

{% block all_content %}

<style>

    body {
        padding-top: 0;
    }

    .edit_box {
        background-color: rgba(255,255,255,.2);
        border:
            {% if edit %}
                3px dashed #5bc0de
            {% else %}
                1px solid rgb(65,45,120)
            {% endif %};
        height: 95%;
        overflow-x: hidden;
        overflow-y: scroll;
        padding: 10px;
        text-align: left;
        width: 100%;
    }

    .edit_box:hover {
        background-color: rgba(255, 255, 255, .9);
    }

    .template_row {
        display: flex;
        justify-content: space-between;
        width: 100%
    }

    .template_component {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 47%;
    }

    .edit_btn_central {
        position: absolute;
        font-size: 14pt;
        width: 125px;
    }

    .edit_btn_control {
        position: absolute;
        width: 125px;
    }

</style>

<img id='background_image' src="{% static 'img/plot-mountain-112916.png' %}"
     style="margin-top: -90px;  z-index: -1;">

<div id="fixed-top-bar" style="position: fixed; top: 50px; height: 800px; width: 1090px; left: 41px;">

    {% if storywheel.author == request.user %}

        <a id="edit_mode_button" class="btn btn-info"
           style="
            position: absolute; top: 40px; left: 900px;
            font-size: 22pt; width: 150px; height: 55px;
            z-index: 225;"
           href="{% if edit %}
                        {% url "joscourses:sw_plot" storywheel.id %}
                     {% else %}
                        {% url "joscourses:sw_plot_edit" storywheel.id %}
                     {% endif %}">
            {% if edit %}Hide{% else %}Edit{% endif %}
        </a><br>

    {% endif %}

    {% if edit %}

        <!-- Editor -->
        <div id='edit_bucket' style="position: absolute; left: 80px; top: 150px;  z-index: 115; display: none;">

            <a id="cancel_btn_central"
               class="btn btn-danger edit_btn_control"
               style="top: 2px; left: 685px;"
               onclick="cntrlCKDestroy();"
               data-toggle="tooltip"
               data-placement="bottom"
               title="Warning: discards recent changes!"
            >
                Discard
            </a>

            <a id="save_btn_central"
               class="btn btn-success edit_btn_control"
               style="top: 2px; left: 825px;"
               onclick="cntrlCKEditSave('plot', '/joscourses/storywheel_update/?id=' + '{{ storywheel.id }}');"
               data-toggle="tooltip"
               data-placement="bottom"
               title="Replaces template content"
            >
                Save
            </a>

            <div id="cntrl_editor_title"
                 style="
                        font-size: 42pt;
                        font-weight: bold;
                        position: absolute; top: -20px;
                        height: 40px; width: 500px;
                        background-color: white;
                        z-index: 115;
                ">Test
            </div>

            <div id="cntrl_editor_container"
                 style="position: absolute; top: 45px; width: 950px;">
            </div>

        </div>

        <!-- Edit Buttons -->
        <div>
            <a id="climax_edit_btn"
               class="btn btn-info btn-xs edit_btn_central"
               style="left: 0; top: -4px;"
               onclick="cntrlCKEditStart('climax');"
               data-toggle="tooltip"
               data-placement="bottom"
               title="Activates editor"
            >
                Edit climax
            </a>

            <a id="rising_edit_btn"
               class="btn btn-info btn-xs edit_btn_central"
               style="left: 0; top: 193px;"
               onclick="cntrlCKEditStart('rising');"
               data-toggle="tooltip"
               data-placement="bottom"
               title="Activates editor"
            >
                Edit rising
            </a>

            <a id="falling_edit_btn"
               class="btn btn-info btn-xs edit_btn_central"
               style="left: 963px; top: 193px;"
               onclick="cntrlCKEditStart('falling');"
               data-toggle="tooltip"
               data-placement="bottom"
               title="Activates editor"
            >
                Edit falling
            </a>

            <a id="incite_edit_btn"
               class="btn btn-info btn-xs edit_btn_central"
               style="left: 0; top: 643px;"
               onclick="cntrlCKEditStart('incite');"
               data-toggle="tooltip"
               data-placement="bottom"
               title="Activates editor"
            >
                Edit incite
            </a>

            <a id="resolve_edit_btn"
               class="btn btn-info btn-xs edit_btn_central"
               style="left: 963px; top: 642px;"
               onclick="cntrlCKEditStart('resolve');"
               data-toggle="tooltip"
               data-placement="bottom"
               title="Activates editor"
            >
                Edit resolve
            </a>
        </div>
    {% endif %}

    <div class="template_row" style="justify-content: flex-start; height: 15%;">

        <!-- Climax -->
        <div class="template_component" style="width: 75%;">

            <div id='original_content_climax' class='edit_box'>
                {{ plot_template.climax }}
            </div>

        </div>

    </div>

    <div class="template_row" style="height: 48%; margin-top: 7%;">

        <!-- Rising -->
        <div class="template_component" style="width: 58%;">
            <div id='original_content_rising' class='edit_box'>
                {{ plot_template.rising }}
            </div>
        </div>

        <!-- Falling -->
        <div class="template_component" style="width: 37%;">
            <div id='original_content_falling' class='edit_box'>
                {{ plot_template.falling }}
            </div>
        </div>

    </div>

    <div class="template_row"
             style="display: flex; justify-content: space-between; height: 24%; margin-top: 6%;">

            <!-- Incite -->
            <div class="template_component">

                <div id='original_content_incite' class='edit_box'>
                    {{ plot_template.incite }}
                </div>

            </div>

            <!-- Resolve -->
            <div class="template_component">

                <div id='original_content_resolve' class='edit_box'>
                    {{ plot_template.resolve }}
                </div>

            </div>
        </div>

</div>

<script src="{% static "js/central-editor-include.js" %}"></script>

<script></script>

{% endblock all_content %}
