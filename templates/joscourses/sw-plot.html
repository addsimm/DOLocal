{% load i18n mezzanine_tags accounts_tags  static %}
<style>

    body {
        padding-top: 0;
    }

    .edit_btn_central {
        font-size: 14pt;
        width: auto;
        display: none;
    }

    .edit_btn_control {
        position: absolute;
        width: 125px;
    }

    .edit_box {
        background-color: rgba(255, 255, 255, .9);
        border:
            {% if edit %}
                3px dashed #5bc0de
            {% else %}
                1px solid rgb(65,45,120)
            {% endif %};
        overflow-x: hidden;
        overflow-y: scroll;
        padding: 10px 15px;
        text-align: left;
        width:100%;
        height: 100%;
    }

    .edit_box:hover {
        background-color: white;
    }

    .template_row {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
    }

    .template_component {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
    }

</style>

<!-- Page title -->

<div id="fixed_background" style="position: absolute; top: 0; left: 60px;">

    <div class="text-center" style="margin: 30px -30px 0 -45px; width: 1200px; height: 925px; border: 8px solid #EE3B38; z-index: 115;">
        <img id='background_image' src="{% static 'img/plot-template-113016.png' %}"
             style="margin-top: 30px; z-index: -1;">
    </div>
</div>

<div id="fixed-top-bar"
     style="position: absolute; top: 75px; height: 850px; width: 1140px; left: 45px;">

    {% if wheel.author == request.user %}

        <a id="edit_mode_button" class="btn btn-info"
           style="
            position: absolute; top: 25px; left: 1000px;
            font-size: 22pt; width: 150px; height: 55px;
            z-index: 225;"
           href="{% if edit %}
                        {% url "joscourses:sw_plot" wheel.id %}
                     {% else %}
                        {% url "joscourses:sw_plot_edit" wheel.id %}
                     {% endif %}">
            {% if edit %}Hide{% else %}Edit{% endif %}
        </a><br>

    {% endif %}

    {% if edit %}

        <!-- Editor -->
        <div id='edit_bucket' style="position: absolute; left: 0; top: 120px; z-index: 115; display: none;">


            <div id="component_hints"
                 style="position: absolute; left: 0; top: 15px;
                        height: 540px; width: 325px;
                        border: 1px solid rgb(65,45,120);
                        background-color: lightyellow;">

            </div>

            <a id="cancel_btn_central"
               class="btn btn-danger edit_btn_control"
               style="top: 2px; left: 875px;"
               onclick="cntrlCKDestroy();"
               data-toggle="tooltip"
               data-placement="bottom"
               title="Warning: discards recent changes!"
            >
                Discard
            </a>

            <a id="save_btn_central"
               class="btn btn-success edit_btn_control"
               style="top: 2px; left: 1015px;"
               onclick="cntrlCKEditSave('plot', '/joscourses/wheel_update/?id=' + '{{ wheel.id }}');"
               data-toggle="tooltip"
               data-placement="bottom"
               title="Replaces template content"
            >
                Save
            </a>

            <div id="cntrl_editor_title"
                 style="
                        font-size: 42pt;
                        font-weight: bold;
                        position: absolute; top: -30px; left: 345px;
                        height: 75px; width: 500px;
                        background-color: white;
                        z-index: 115;
                ">Test
            </div>

            <div id="cntrl_editor_container"
                 style="position: absolute; top: 45px; left: 340px; width: 800px; height: 490px; background-color: lightblue;">
            </div>

        </div>

     {% endif %}

    <div class="template_row" style="height: 19%;">

        <!-- Climax -->
        <div class="template_component" style="width: 82%;">
            <div class="component_label">Climax</div>

            <a id="climax_edit_btn"
               class="btn btn-info edit_btn_central"
               onclick="cntrlCKEditStart('climax');"
               data-toggle="tooltip"
               data-placement="bottom"
               title="Activates editor"
            >
                Edit climax
            </a>

            <div id='original_content_climax' class='edit_box'>
                {{ plot_template.climax }}
            </div>

        </div>

    </div>

    <div class="template_row" style="height: 49%; margin-top: 3%;">

        <!-- Rising -->
        <div class="template_component" style="width: 58%;">
            <div class="component_label">Rising action</div>

            <a id="rising_edit_btn"
               class="btn btn-info edit_btn_central"
               onclick="cntrlCKEditStart('rising');"
               data-toggle="tooltip"
               data-placement="bottom"
               title="Activates editor"
            >
                Edit rising action
            </a>

            <div id='original_content_rising' class='edit_box'>
                {{ plot_template.rising }}
            </div>
        </div>

        <!-- Falling -->
        <div class="template_component" style="width: 37%; align-items: flex-end;">
            <div class="component_label">Falling action</div>

            <a id="falling_edit_btn"
               class="btn btn-info edit_btn_central"
               onclick="cntrlCKEditStart('falling');"
               data-toggle="tooltip"
               data-placement="bottom"
               title="Activates editor"
            >
                Edit falling action
            </a>

            <div id='original_content_falling' class='edit_box'>
                {{ plot_template.falling }}
            </div>
        </div>

    </div>

    <div class="template_row"
             style="display: flex; justify-content: space-between; height: 26%; margin-top: 3%;">

            <!-- Incite -->
            <div class="template_component" style="width: 47%;">
                <div class="component_label">Inciting incident</div>

                <a id="incite_edit_btn"
                   class="btn btn-info edit_btn_central"
                   onclick="cntrlCKEditStart('incite');"
                   data-toggle="tooltip"
                   data-placement="bottom"
                   title="Activates editor"
                >
                    Edit inciting incident
                </a>


                <div id='original_content_incite' class='edit_box'>
                    {{ plot_template.incite }}
                </div>

            </div>

            <!-- Resolve -->
            <div class="template_component" style="width: 47%;  align-items: flex-end;">
                <div class="component_label">Resolution</div>

                <a id="resolve_edit_btn"
                   class="btn btn-info edit_btn_central"
                   onclick="cntrlCKEditStart('resolve');"
                   data-toggle="tooltip"
                   data-placement="bottom"
                   title="Activates editor"
                >
                    Edit resolution
                </a>
                <div id='original_content_resolve' class='edit_box'>
                    {{ plot_template.resolve }}
                </div>

            </div>
        </div>

</div>

<script src="{% static "js/central-editor-include.js" %}"></script>

<script>

        if ('{{ edit }}' === 'True') {
            $('.edit_btn_central').show();
        } else {
            $('.component_label').show();
        }

</script>


