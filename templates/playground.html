{% extends "base.html" %}
{% block meta_title %}{% endblock %}
{% block title %}{% endblock %}
{% block breadcrumb_menu %}{{ block.super }}Dev Playground{% endblock %}
{% block help %}{% endblock %}
{% block logout %}{% endblock %}
{% block base-fixed-top-bar %}{% endblock %}
{% block footer %}{% endblock %}

{% block all_content %}

<!-- HTML Section -->

<div id="mouse_report" style="margin-top: 650px; height: 100px; width: 400px;">Mouse position:</div>


<div id="big_box" style="position: fixed; top: 0px; left: 0px;
            height: 704px; width: 1024px;
            outline: 3px dashed black;">

    <div id="square1" style="
             position: absolute; top: 0; left: 0;
             height: 176px; width: 256px;
             background-image: url('/static/img/3create_4.5.png');
             background-repeat: no-repeat;
             background-size: 100% 100%;
             outline: 1px solid rgb(65, 45, 120);
             ">
    </div>

    <div id="square3" style="
             position: absolute; bottom: 0; right: 0px;
             height: 176px; width: 256px;
             background-image: url('/static/img/3enjoy_4.5.png');
             background-repeat: no-repeat;
             background-size: 100% 100%;
             outline: 1px solid rgb(65, 45, 120);
             ">
    </div>

</div>

<!-- SCRIPTS -->
<script>

    var square_names = ['hub', 'enjoy', 'create', 'share'];
    var MR = document.getElementById('mouse_report');

    var square1 = document.getElementById('square1');
    var square3 = document.getElementById('square3');

    // Tracks mouse in document
    $(document).mousemove(function (e) {

        var mousePos = getMousePos(e);
        var message = 'Mouse position: ' + (mousePos.x) + ', ' + (mousePos.y);
        $(MR).text(message);

        var pos1x;
        if (mousePos.x < 512) {
            pos1x = 640;
        } else if (mousePos.x > 768) {
            pos1x = 768;
        } else {
            pos1x = mousePos.x
        }

        var pos1y;
        if (mousePos.y < 352) {
            pos1y = 440;
        } else if (mousePos.y > 528) {
            pos1y = 528;
        } else {
            pos1y = mousePos.y
        }

        $(square1).css('width', 512 + (512 - pos1x));
        $(square1).css('height', 352 + (352 - pos1y));


        var pos3x;
        if (mousePos.x < 256) {
            pos3x = 0;
        } else if (mousePos.x > 512) {
            pos3x = 256;
        } else {
            pos3x = mousePos.x - 256;
        }

        $(square3).css('width', 256 + pos3x);

        var pos3y;
        if (mousePos.y < 176) {
            pos3y = 0;
        } else if (mousePos.y > 352) {
            pos3y = 176;
        } else {
            pos3y = mousePos.y - 176;
        }

        $(square3).css('height', 176 + pos3y);









        var hover1 = $('#square1:hover').length;

        if (hover1 === 1) {
            $(square1).css('background-color', 'blue');
        } else {
            $(square1).css('background-color', 'red');
        }
    });

    function getMousePos(evt) {
        return {
            x: evt.clientX,
            y: evt.clientY
        };
    }

    /*
var C = document.getElementById('test_canvas');     // Canvas
var ctx = C.getContext('2d');                       // Canvas contest
var paths = [];                                     // Array to hold paths for ctx shapes


    // Called on major page state changes to redraw canvas
    function redraw() {
        console.log('drawing');
        ctx.clearRect(0, 0, C.width, C.height);
        paths = [];
        var path1 = new Path2D();

        ctx.lineWidth = 2;

        path1.rect(600, 100, 100, 400);
        ctx.stroke(path1);
        paths.push(path1);
    }


    function detectHover() {
        if (hover === 1) {

            for (i = 0; i < 5; i++) {
                if (ctx.isPointInPath(paths[i], mousePos.x, mousePos.y)) {
                    $(MR).append('<br> -- in path');
                    newSquare = i + 1;
                    break
                } else {
                    newSquare = 0;
                }
            }
        }

        if (newSquare !== oldSquare) {
            redraw();
            if (newSquare !== 0) {
                ctx.save();
                ctx.fillStyle = "red";
                ctx.globalAlpha = 0.6;
                ctx.fill(paths[newSquare - 1]);
                ctx.restore();
            }

            oldSquare = newSquare;
        }
    }

    // mouse events within canvas - click
    C.addEventListener('click', function (e) {
        var segment = 0;
        var mousePos = getMousePos(C, e);
        for (i = 0; i < 5; i++) {
            if (ctx.isPointInPath(paths[i], mousePos.x, mousePos.y)) {
                segment = i + 1;
                break
            }
        }
        console.log(squares[segment] + ' clicked');
    });

    function getMousePosCanvas(canvas, evt) {
        var rect = canvas.getBoundingClientRect();
        return {
            x: evt.clientX - rect.left,
            y: evt.clientY - rect.top
        }
    }
*/

</script>

{% endblock all_content %}

<div class="row">
    <div class="col-xs-12 text-center">
        <canvas id="test_canvas" width="800" height="800"
                style="margin-top: 350px; outline: 3px solid blue;">
            Your browser does not support HTML5 Canvas.
        </canvas>
    </div>
</div>